apiVersion: v3
kind: recipe
metadata:
  id: >-
    @extension-e2e-test-unaffiliated/lifecycle-test-00000000-0000-0000-0000-000000000000-00000000-0000-0000-0000-000000000000
  name: Lifecycle Test 00000000-0000-0000-0000-000000000000
  version: 1.0.0
  description: Created with the PixieBrix Page Editor
extensionPoints:
  - label: Test Button 00000000-0000-0000-0000-000000000000
    config:
      caption: Search Youtube
      action:
        - id: '@pixiebrix/jquery-reader'
          rootMode: document
          config:
            selectors:
              searchText:
                selector: '#root h1'
                isMulti: false
                multi: false
          outputKey: data
          root: null
        - id: youtube/search
          rootMode: document
          config:
            query: !nunjucks '{{ @data.searchText }} + Foo'
          root: null
      dynamicCaption: false
      onSuccess: true
      synchronous: false
    permissions:
      origins: []
      permissions: []
    id: extensionPoint
    services: {}
definitions:
  extensionPoint:
    kind: extensionPoint
    definition:
      type: menuItem
      reader:
        - '@pixiebrix/document-metadata'
        - '@pixiebrix/document-context'
        - element: '@pixiebrix/html/element'
      isAvailable:
        matchPatterns:
          - https://pbx.vercel.app/*
        urlPatterns: []
        selectors: []
        allFrames: true
      containerSelector: 'div:has(> button:contains(''Action #3''))'
      targetMode: document
      attachMode: once
      position: append
      template: |-
        <button type="button"
            class="btn">{{{ caption }}}</button>
options:
  schema:
    type: object
    properties: {}
  uiSchema:
    ui:order:
      - '*'